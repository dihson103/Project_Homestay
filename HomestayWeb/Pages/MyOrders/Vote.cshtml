@page
@model HomestayWeb.Pages.MyOrders.VoteModel

<h1>Vote for @ViewData["HomestayName"]</h1>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<form method="post" asp-page-handler="Vote" asp-route-homestayId="@ViewData["HomestayId"]">
    <div class="form-group">
        <label asp-for="Vote.Review" class="control-label">Review:</label>
        <textarea asp-for="Vote.Review" class="form-control"></textarea>
        <span asp-validation-for="Vote.Review" class="text-danger"></span>
    </div>

    <!-- Star Rating Section -->
    <div>
        <span id="span1" onmouseout="CRateOut(1)" onmouseover="CRateOver(1)" onclick="CRateClick(1)" class="glyphicon glyphicon-star-empty" style="color: gold;"></span>
        <span id="span2" onmouseout="CRateOut(2)" onmouseover="CRateOver(2)" onclick="CRateClick(2)" class="glyphicon glyphicon-star-empty" style="color: gold;"></span>
        <span id="span3" onmouseout="CRateOut(3)" onmouseover="CRateOver(3)" onclick="CRateClick(3)" class="glyphicon glyphicon-star-empty" style="color: gold;"></span>
        <span id="span4" onmouseout="CRateOut(4)" onmouseover="CRateOver(4)" onclick="CRateClick(4)" class="glyphicon glyphicon-star-empty" style="color: gold;"></span>
        <span id="span5" onmouseout="CRateOut(5)" onmouseover="CRateOver(5)" onclick="CRateClick(5)" class="glyphicon glyphicon-star-empty" style="color: gold;"></span>
    </div>

    <div>
        <input type="hidden" id="lblRating" name="Vote.Rating" />
    </div>
    <div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </div>
</form>

<!-- JavaScript Section -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
    var selectedRating = 0;

    function CRateOver(rating) {
        for (var i = 1; i <= rating; i++) {
            $("#span" + i).attr('class', 'glyphicon glyphicon-star');
        }
    }

    function CRateClick(rating) {
        selectedRating = rating;
        updateStars(selectedRating);
    }

    function CRateOut() {
        updateStars(selectedRating);
    }

    function updateStars(rating) {
        for (var i = 1; i <= 5; i++) {
            if (i <= rating) {
                $("#span" + i).attr('class', 'glyphicon glyphicon-star');
            } else {
                $("#span" + i).attr('class', 'glyphicon glyphicon-star-empty');
            }
        }

        $("#lblRating").val(rating);
    }

    function VerifyRating() {
        if (selectedRating === 0) {
            alert("Please Select Rating.");
            return false;
        }
    }
</script>

